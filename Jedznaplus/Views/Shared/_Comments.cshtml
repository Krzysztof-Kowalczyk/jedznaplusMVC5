@model IEnumerable<Jedznaplus.Models.Comment>


<table class="table" id="CommentsTable">
    @if (Model.Count() == 0)
    {
        <p>Nikt jeszcze nie skomentował potrawy. Bądź pierwszy !</p>
    }
    else
    {
        <tr>
            <th style="width:30px">

            </th>
            <th style="width:150px">
                @Html.DisplayNameFor(model => model.UserName)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Content)
            </th>
            <th></th>
        </tr>


        foreach (var item in Model)
        {
            <tr>
                <td>
                    <img src="@Url.Content(Html.Action("AvatarURL", "Home", new { userName=item.UserName}).ToString())" alt="image" width="100" height="100" />
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.UserName)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Content)
                </td>
            </tr>
        }
    }

</table>
@if (!User.Identity.IsAuthenticated)
{
    <text><a href="/Account/Login?ReturnUrl=@Request.Url.AbsolutePath" title="Zaloguj się">Zaloguj się </a>, aby dodwać komentarze</text>
    return;
}

@using (Html.BeginForm("Create", "Comments"))
{
    <div class="editor-field">
        <textarea cols="70" rows="3" id="Contetnt" name="Content"></textarea>
    </div>

    <input type="hidden" id="RecipeId" value="@ViewData["id"].ToString()" name="RecipeId" />
    <input type="hidden" id="UserName" value="@User.Identity.Name" name="UserName" />
    <p>
        <input type="submit" name="dodajKomentarz" value="Dodaj" />
    </p>
}
